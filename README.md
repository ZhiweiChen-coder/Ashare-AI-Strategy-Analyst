# Ashare-AI-Strategy-Analyst

**Language / è¯­è¨€**: [English](#english-version) | [ä¸­æ–‡](#ä¸­æ–‡ç‰ˆæœ¬)

---

## ä¸­æ–‡ç‰ˆæœ¬

ä¸€ä¸ªåŸºäºPythonçš„Aè‚¡æ™ºèƒ½åˆ†æå·¥å…·ï¼Œç»“åˆå¤§è¯­è¨€æ¨¡å‹æä¾›æ•°æ®é©±åŠ¨çš„æŠ•èµ„å»ºè®®å’Œå¸‚åœºæ´å¯Ÿã€‚

### é¡¹ç›®ç®€ä»‹

Ashare-LLM-Analyst æ˜¯ä¸€ä¸ªAè‚¡å¸‚åœºçš„æŠ€æœ¯åˆ†æå·¥å…·ï¼Œé€šè¿‡[Ashare](https://github.com/mpquant/Ashare)é‡‡é›†è‚¡ç¥¨å†å²æ•°æ®ï¼Œ[MyTT](https://github.com/mpquant/MyTT)è®¡ç®—å¸¸è§æŠ€æœ¯æŒ‡æ ‡ï¼ˆå¦‚MACDã€KDJã€RSIç­‰ï¼‰ï¼Œå¹¶åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆDeepseekï¼‰ç”Ÿæˆå¯è¯»æ€§å¼ºçš„æŠ•èµ„å»ºè®®å’Œå¸‚åœºåˆ†æã€‚

è¯¥å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„HTMLåˆ†ææŠ¥å‘Šï¼ŒåŒ…æ‹¬åŸºç¡€æ•°æ®åˆ†æã€æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ã€è¶‹åŠ¿åˆ¤æ–­ã€æ”¯æ’‘/é˜»åŠ›ä½è¯†åˆ«ä»¥åŠAIè¾…åŠ©çš„ä¸“ä¸šæŠ•èµ„å»ºè®®ã€‚

### å¼€æºè‡´è°¢

æœ¬é¡¹ç›®æ˜¯åŸºäº [@Ogannesson](https://github.com/Ogannesson) çš„å¼€æºé¡¹ç›® [ashare-llm-analyst](https://github.com/Ogannesson/ashare-llm-analyst) è¿›è¡Œå¼€å‘å’Œå¢å¼ºçš„ã€‚æ„Ÿè°¢åŸä½œè€…çš„ä¼˜ç§€å·¥ä½œå’Œå¼€æºè´¡çŒ®ï¼

åœ¨åŸé¡¹ç›®åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä»¥ä¸‹æ”¹è¿›ï¼š
- ğŸ—ï¸ **æ¨¡å—åŒ–é‡æ„**ï¼šå°†åŸæœ‰çš„å•æ–‡ä»¶ä»£ç é‡æ„ä¸ºæ¸…æ™°çš„æ¨¡å—åŒ–æ¶æ„
- âš™ï¸ **é…ç½®ç³»ç»Ÿå¢å¼º**ï¼šæ·»åŠ äº†å®Œå–„çš„é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶
- ğŸ“ **æ—¥å¿—ç³»ç»Ÿä¼˜åŒ–**ï¼šå®ç°äº†ç»Ÿä¸€çš„å½©è‰²æ—¥å¿—ç³»ç»Ÿå’Œæ–‡ä»¶æ—¥å¿—è½®è½¬
- ğŸ”§ **ä»£ç è´¨é‡æå‡**ï¼šæ·»åŠ ç±»å‹æç¤ºã€æ–‡æ¡£å­—ç¬¦ä¸²å’Œå®Œå–„çš„å¼‚å¸¸å¤„ç†
- ğŸ¯ **åŠŸèƒ½æ‰©å±•**ï¼šå¢åŠ äº†äº¤æ˜“ä¿¡å·ç”Ÿæˆã€æ¨é€é€šçŸ¥ç­‰é«˜çº§åŠŸèƒ½
- ğŸŒ **Webç•Œé¢**ï¼šæ·»åŠ äº†Streamlit Webåº”ç”¨ç•Œé¢

### åœ¨çº¿é¢„è§ˆ

æ‚¨å¯ä»¥è®¿é—® [æ­¤å¤„](https://ala.oganneson.com) æŸ¥çœ‹åˆ†ææŠ¥å‘Šçš„ç¤ºä¾‹æ•ˆæœã€‚

### ä¸»è¦åŠŸèƒ½

- è‡ªåŠ¨è·å–Aè‚¡å†å²äº¤æ˜“æ•°æ®
- è®¡ç®—è¶…è¿‡25ç§æŠ€æœ¯æŒ‡æ ‡ï¼ˆMAã€MACDã€KDJã€RSIã€BOLLç­‰ï¼‰
- ç”Ÿæˆè¯¦ç»†çš„æŠ€æœ¯åˆ†æå›¾è¡¨
- ä½¿ç”¨Deepseekå¤§è¯­è¨€æ¨¡å‹æä¾›ä¸“ä¸šçš„æŠ•èµ„åˆ†æå’Œå»ºè®®
- è¾“å‡ºç¾è§‚çš„HTMLæ ¼å¼åˆ†ææŠ¥å‘Š
- ğŸŒ **Webç•Œé¢**ï¼šç°ä»£åŒ–çš„Streamlit Webåº”ç”¨

### ä½¿ç”¨æ–¹æ³•

#### å‰ç½®å‡†å¤‡

1. ç¡®ä¿å®‰è£…äº†æ‰€æœ‰å¿…éœ€çš„ä¾èµ–é¡¹:
```bash
pip install -r requirements.txt
```

2. é…ç½®å¤§è¯­è¨€æ¨¡å‹APIä¿¡æ¯ï¼ˆä¸¤ç§æ–¹å¼ï¼‰ï¼š

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**
```bash
# Linux/Mac
export LLM_API_KEY="your_api_key_here"
export LLM_BASE_URL="https://api.deepseek.com"
export LLM_MODEL="deepseek-chat"

# Windows (å‘½ä»¤æç¤ºç¬¦)
set LLM_API_KEY=your_api_key_here
set LLM_BASE_URL=https://api.deepseek.com
set LLM_MODEL=deepseek-chat

# Windows (PowerShell)
$env:LLM_API_KEY="your_api_key_here"
$env:LLM_BASE_URL="https://api.deepseek.com"
$env:LLM_MODEL="deepseek-chat"
```

**æ–¹å¼äºŒï¼šä½¿ç”¨.envæ–‡ä»¶**
```bash
cp env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„APIå¯†é’¥
```

#### è¿è¡Œæ–¹å¼

**1. å‘½ä»¤è¡Œè¿è¡Œ**
```bash
python main.py
```

**2. Webç•Œé¢è¿è¡Œï¼ˆæ¨èï¼‰**
```bash
streamlit run streamlit_app.py
```

### ğŸš€ éƒ¨ç½²æŒ‡å—

#### æ–¹æ¡ˆ1ï¼šStreamlit Cloudï¼ˆæ¨èï¼Œå…è´¹ï¼‰

1. **å‡†å¤‡ä»£ç **
   ```bash
   git add .
   git commit -m "Prepare for deployment"
   git push origin main
   ```

2. **éƒ¨ç½²åˆ°Streamlit Cloud**
   - è®¿é—® [share.streamlit.io](https://share.streamlit.io)
   - ä½¿ç”¨GitHubè´¦æˆ·ç™»å½•
   - ç‚¹å‡»"New app"
   - é€‰æ‹©ä»“åº“å’Œä¸»æ–‡ä»¶ï¼š`streamlit_app.py`
   - ç‚¹å‡»"Deploy"

3. **é…ç½®ç¯å¢ƒå˜é‡**
   - åœ¨Streamlit Cloudçš„App Settingsä¸­
   - ç‚¹å‡»"Secrets"æ ‡ç­¾
   - æ·»åŠ æ‰€æœ‰APIå¯†é’¥å’Œé…ç½®

#### æ–¹æ¡ˆ2ï¼šVPSæœåŠ¡å™¨éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip nginx
   ```

2. **å…‹éš†ä»£ç å¹¶å®‰è£…ä¾èµ–**
   ```bash
   git clone https://github.com/your-username/Ashare-AI-Strategy-Analyst.git
   cd Ashare-AI-Strategy-Analyst
   pip3 install -r requirements.txt
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp env.example .env
   nano .env  # ç¼–è¾‘å¹¶å¡«å…¥çœŸå®çš„APIå¯†é’¥
   ```

4. **è¿è¡Œåº”ç”¨**
   ```bash
   streamlit run streamlit_app.py --server.port=8501 --server.address=0.0.0.0
   ```

#### æ–¹æ¡ˆ3ï¼šDockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t stock-analyzer .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name stock-analyzer \
  -p 8501:8501 \
  -e LLM_API_KEY="your-api-key" \
  -e LLM_BASE_URL="https://api.deepseek.com" \
  -e LLM_MODEL="deepseek-chat" \
  stock-analyzer
```

### ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- **APIå¯†é’¥å®‰å…¨**ï¼šæ°¸è¿œä¸è¦å°†APIå¯†é’¥æäº¤åˆ°GitHub
- **ç¯å¢ƒå˜é‡**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–éƒ¨ç½²å¹³å°çš„SecretsåŠŸèƒ½å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- **æ–‡ä»¶æƒé™**ï¼šç¡®ä¿.envæ–‡ä»¶æœ‰æ­£ç¡®çš„æƒé™è®¾ç½®ï¼ˆ600ï¼‰

### æŠ€æœ¯æ¶æ„

- æ•°æ®è·å–ï¼šä½¿ç”¨Ashareæ¨¡å—è·å–Aè‚¡å†å²æ•°æ®
- æŠ€æœ¯åˆ†æï¼šä½¿ç”¨MyTTåº“è¿›è¡ŒæŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- å›¾è¡¨ç”Ÿæˆï¼šä½¿ç”¨Plotlyç”Ÿæˆäº¤äº’å¼æŠ€æœ¯åˆ†æå›¾è¡¨
- AIåˆ†æï¼šé€šè¿‡Deepseek APIè·å–ä¸“ä¸šçš„æŠ•èµ„å»ºè®®
- Webç•Œé¢ï¼šä½¿ç”¨Streamlitæ„å»ºç°ä»£åŒ–Webåº”ç”¨
- æŠ¥å‘Šç”Ÿæˆï¼šç”ŸæˆåŒ…å«è¯¦ç»†åˆ†æçš„HTMLæŠ¥å‘Š

### è¾“å‡ºç¤ºä¾‹

ç”Ÿæˆçš„åˆ†ææŠ¥å‘ŠåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

1. åŸºç¡€æŠ€æœ¯åˆ†æï¼ˆæ”¶ç›˜ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰ï¼‰
2. æŠ€æœ¯æŒ‡æ ‡è¯¦æƒ…ï¼ˆå„é¡¹æŒ‡æ ‡çš„æœ€æ–°å€¼ï¼‰
3. æŠ€æœ¯æŒ‡æ ‡å›¾è¡¨ï¼ˆå¤šç»´åº¦çš„è‚¡ç¥¨èµ°åŠ¿åˆ†æå›¾ï¼‰
4. äººå·¥æ™ºèƒ½åˆ†ææŠ¥å‘Šï¼ˆåŸºäºå†å²æ•°æ®çš„ä¸“ä¸šåˆ†æå’ŒæŠ•èµ„å»ºè®®ï¼‰

### é‡è¦è¯´æ˜

- **å®‰å…¨æç¤º**ï¼šè¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡ä½ çš„APIå¯†é’¥ï¼Œå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚

- **è¾“å‡ºä½ç½®**ï¼šåˆ†æç»“æœä¼šè¾“å‡ºåˆ°æ ¹ç›®å½•ä¸‹çš„`public`æ–‡ä»¶å¤¹ä¸­ã€‚å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ›å»ºã€‚

- **å…è´£å£°æ˜**ï¼šæœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…ã€‚ç”¨æˆ·åº”å¯¹è‡ªå·±çš„æŠ•èµ„å†³ç­–è´Ÿè´£ã€‚

### åç»­å¼€å‘è®¡åˆ’

- æ·»åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡å’Œåˆ†æç»´åº¦
- æä¾›æ›´ä¸°å¯Œçš„å¯è§†åŒ–é€‰é¡¹
- å¢åŠ å†å²æ•°æ®å¯¹æ¯”å’Œå›æµ‹åŠŸèƒ½
- ä¼˜åŒ–AIåˆ†ææ¨¡å‹å’Œæç¤ºè¯è®¾è®¡

### è®¸å¯è¯

[MIT License](LICENSE)

---

## English Version

A Python-based intelligent analysis tool for Chinese A-shares, combining large language models to provide data-driven investment recommendations and market insights.

### Project Overview

Ashare-AI-Strategy-Analyst is a technical analysis tool for the Chinese A-share market that uses [Ashare](https://github.com/mpquant/Ashare) to collect historical stock data, [MyTT](https://github.com/mpquant/MyTT) to calculate common technical indicators (such as MACD, KDJ, RSI, etc.), and leverages large language models (Deepseek) to generate readable investment recommendations and market analysis.

This tool can automatically generate comprehensive HTML analysis reports, including basic data analysis, technical indicator calculations, trend analysis, support/resistance level identification, and AI-assisted professional investment recommendations.

### Open Source Acknowledgments

This project is developed and enhanced based on the open-source project [ashare-llm-analyst](https://github.com/Ogannesson/ashare-llm-analyst) by [@Ogannesson](https://github.com/Ogannesson). Thanks to the original author for the excellent work and open-source contribution!

Based on the original project, we have made the following improvements:
- ğŸ—ï¸ **Modular Refactoring**: Refactored the original single-file code into a clear modular architecture
- âš™ï¸ **Enhanced Configuration System**: Added comprehensive configuration validation and error handling mechanisms
- ğŸ“ **Optimized Logging System**: Implemented unified colored logging system and file log rotation
- ğŸ”§ **Code Quality Improvement**: Added type hints, docstrings, and comprehensive exception handling
- ğŸ¯ **Feature Extension**: Added trading signal generation, push notifications, and other advanced features
- ğŸŒ **Web Interface**: Added Streamlit Web application interface

### Online Preview

You can visit [here](https://ala.oganneson.com) to view sample analysis reports.

### Key Features

- Automatically fetch Chinese A-share historical trading data
- Calculate over 25 technical indicators (MA, MACD, KDJ, RSI, BOLL, etc.)
- Generate detailed technical analysis charts
- Use Deepseek large language model to provide professional investment analysis and recommendations
- Output beautiful HTML format analysis reports
- ğŸŒ **Web Interface**: Modern Streamlit Web application

### Usage Instructions

#### Prerequisites

1. Ensure all required dependencies are installed:
```bash
pip install -r requirements.txt
```

2. Configure the Large Language Model API information (two methods):

**Method 1: Using Environment Variables (Recommended)**
```bash
# Linux/Mac
export LLM_API_KEY="your_api_key_here"
export LLM_BASE_URL="https://api.deepseek.com"
export LLM_MODEL="deepseek-chat"

# Windows (Command Prompt)
set LLM_API_KEY=your_api_key_here
set LLM_BASE_URL=https://api.deepseek.com
set LLM_MODEL=deepseek-chat

# Windows (PowerShell)
$env:LLM_API_KEY="your_api_key_here"
$env:LLM_BASE_URL="https://api.deepseek.com"
$env:LLM_MODEL="deepseek-chat"
```

**Method 2: Using .env File**
```bash
cp env.example .env
# Edit the .env file and fill in your API key
```

#### Running the Application

**1. Command Line Execution**
```bash
python main.py
```

**2. Web Interface (Recommended)**
```bash
streamlit run streamlit_app.py
```

### ğŸš€ Deployment Guide

#### Option 1: Streamlit Cloud (Recommended, Free)

1. **Prepare Code**
   ```bash
   git add .
   git commit -m "Prepare for deployment"
   git push origin main
   ```

2. **Deploy to Streamlit Cloud**
   - Visit [share.streamlit.io](https://share.streamlit.io)
   - Login with your GitHub account
   - Click "New app"
   - Select repository and main file: `streamlit_app.py`
   - Click "Deploy"

3. **Configure Environment Variables**
   - In Streamlit Cloud App Settings
   - Click "Secrets" tab
   - Add all API keys and configurations

#### Option 2: VPS Server Deployment

1. **Install Dependencies**
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip nginx
   ```

2. **Clone Code and Install Dependencies**
   ```bash
   git clone https://github.com/your-username/Ashare-AI-Strategy-Analyst.git
   cd Ashare-AI-Strategy-Analyst
   pip3 install -r requirements.txt
   ```

3. **Configure Environment Variables**
   ```bash
   cp env.example .env
   nano .env  # Edit and fill in real API keys
   ```

4. **Run Application**
   ```bash
   streamlit run streamlit_app.py --server.port=8501 --server.address=0.0.0.0
   ```

#### Option 3: Docker Deployment

```bash
# Build image
docker build -t stock-analyzer .

# Run container
docker run -d \
  --name stock-analyzer \
  -p 8501:8501 \
  -e LLM_API_KEY="your-api-key" \
  -e LLM_BASE_URL="https://api.deepseek.com" \
  -e LLM_MODEL="deepseek-chat" \
  stock-analyzer
```

### ğŸ” Security Notes

- **API Key Security**: Never commit API keys to GitHub
- **Environment Variables**: Use environment variables or deployment platform's Secrets feature to store sensitive information
- **File Permissions**: Ensure .env file has correct permissions (600)

### Technical Architecture

- Data Acquisition: Use Ashare module to fetch Chinese A-share historical data
- Technical Analysis: Use MyTT library for technical indicator calculations
- Chart Generation: Use Plotly to generate interactive technical analysis charts
- AI Analysis: Get professional investment recommendations through Deepseek API
- Web Interface: Build modern Web applications using Streamlit
- Report Generation: Generate HTML reports with detailed analysis

### Output Examples

The generated analysis reports include the following content:

1. Basic Technical Analysis (closing price, price changes, trading volume, etc.)
2. Technical Indicator Details (latest values of various indicators)
3. Technical Indicator Charts (multi-dimensional stock trend analysis charts)
4. Artificial Intelligence Analysis Reports (professional analysis and investment recommendations based on historical data)

### Important Notes

- **Security Warning**: Please keep your API keys secure. It is recommended to use environment variables or configuration files to store sensitive information.

- **Output Location**: Analysis results will be output to the `public` folder in the root directory. If the folder doesn't exist, the program will create it automatically.

- **Disclaimer**: This tool is for learning and research purposes only and does not constitute any investment advice. Investment carries risks, so enter the market with caution. Users should be responsible for their own investment decisions.

### Future Development Plans

- Add more technical indicators and analysis dimensions
- Provide richer visualization options
- Add historical data comparison and backtesting functionality
- Optimize AI analysis models and prompt design

### License

[MIT License](LICENSE)
